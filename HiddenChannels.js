(function(swcHelpers,entities,metro,patcher,reactNative){'use strict';function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}});}})}n["default"]=e;return Object.freeze(n)}var swcHelpers__namespace=/*#__PURE__*/_interopNamespace(swcHelpers);var SnowflakeUtil=function(){function SnowflakeUtil({epoch,increment}={}){swcHelpers__namespace.classCallCheck(this,SnowflakeUtil);this.EPOCH=!epoch?14200704e5:epoch instanceof Date?epoch.getTime():14200704e5;this.INCREMENT=increment&& typeof increment==="number"?increment:0;}var _proto=SnowflakeUtil.prototype;_proto.generate=function generate(timestamp=Date.now()){if(timestamp instanceof Date)timestamp=timestamp.getTime();if(typeof timestamp!=="number"||isNaN(timestamp)){throw new TypeError(`"timestamp" argument must be a number (received ${isNaN(timestamp)?"NaN":typeof timestamp})`)}if(this.INCREMENT>=4095)this.INCREMENT=0;var BINARY=`${(timestamp-this.EPOCH).toString(2).padStart(42,"0")}0000100000${(this.INCREMENT++).toString(2).padStart(12,"0")}`;return this.fromBinary(BINARY)};_proto.deconstruct=function deconstruct(snowflake){if(snowflake==="0")return {epoch:this.EPOCH,timestamp:this.EPOCH,workerID:0,processID:0,increment:0,binary:"0".repeat(64),date:new Date(this.EPOCH),snowflake:snowflake};var BINARY=this.toBinary(snowflake).toString(2).padStart(64,"0");var res={epoch:this.EPOCH,timestamp:parseInt(BINARY.substring(0,42),2)+this.EPOCH,workerID:parseInt(BINARY.substring(42,47),2),processID:parseInt(BINARY.substring(47,52),2),increment:parseInt(BINARY.substring(52,64),2),binary:BINARY};return {...res,date:new Date(res.timestamp),snowflake:snowflake}};_proto.fromBinary=function fromBinary(num){var dec="";while(num.length>50){var high=parseInt(num.slice(0,-32),2);var low=parseInt((high%10).toString(2)+num.slice(-32),2);dec=(low%10).toString()+dec;num=Math.floor(high/10).toString(2)+Math.floor(low/10).toString(2).padStart(32,"0");}num=parseInt(num,2);while(num>0){dec=(num%10).toString()+dec;num=Math.floor(num/10);}if(!dec)throw new Error("Invalid Snowflake");return dec};_proto.toBinary=function toBinary(num){var bin="";var high=parseInt(num.slice(0,-10))||0;var low=parseInt(num.slice(-10));while(low>0||high>0){bin=String(low&1)+bin;low=Math.floor(low/2);if(high>0){low+=5e9*(high%2);high=Math.floor(high/2);}}if(!bin)throw new Error("Invalid snowflake");return bin};_proto.toBase64=function toBase64(snowflake){if(!snowflake|| typeof snowflake!=="string")throw new Error(`The parameter "snowflake" must be a string, received ${typeof snowflake}!`);this.deconstruct(snowflake);return Buffer.from(snowflake).toString("base64")};_proto.fromBase64=function fromBase64(base64Snowflake){if(!base64Snowflake|| typeof base64Snowflake!=="string")throw new Error(`The parameter "base64Snowflake" must be a string, received ${typeof base64Snowflake}!`);var des=Buffer.from(base64Snowflake,"base64").toString();var deconstructed=this.deconstruct(des);return {...deconstructed,snowflake:des}};return SnowflakeUtil}();var HiddenChannels=function(Plugin1){swcHelpers__namespace.inherits(HiddenChannels,Plugin1);var _super=swcHelpers__namespace.createSuper(HiddenChannels);function HiddenChannels(){swcHelpers__namespace.classCallCheck(this,HiddenChannels);return _super.apply(this,arguments)}var _proto=HiddenChannels.prototype;_proto.start=function start(){return swcHelpers__namespace.asyncToGenerator(function*(){var permissions=metro.getByProps("getChannelPermissions","can");function isHidden(channel){if(channel==undefined)return false;if(typeof channel==="string")channel=metro.ChannelStore.getChannel(channel);if(channel?.type===1)return false;return !patcher.callOriginal(permissions.can,permissions,metro.Constants.Permissions.VIEW_CHANNEL,channel)}patcher.before(permissions,"can",ctx=>{var[permId,channel]=ctx.args;if(permId===metro.Constants.Permissions.VIEW_CHANNEL){ctx.result=true;}});var notifications=metro.getByProps("hasUnread","hasUnreadPins","getMentionCount");patcher.before(notifications,"hasUnread",ctx=>{var[channel]=ctx.args;if(isHidden(channel))ctx.result=false;});patcher.before(notifications,"hasUnreadPins",ctx=>{var[channel]=ctx.args;if(isHidden(channel))ctx.result=false;});patcher.before(notifications,"getMentionCount",ctx=>{var[channel]=ctx.args;if(isHidden(channel))ctx.result=0;});var messageFetch=metro.getByProps("fetchMessages");patcher.before(messageFetch,"fetchMessages",ctx=>{var[_,channel]=ctx.args;if(isHidden(channel))ctx.result=null;});var navigator=metro.getByProps("selectChannel");patcher.before(navigator,"selectChannel",ctx=>{var[_,channelId]=ctx.args;if(isHidden(channelId))ctx.result=null;});var Router=metro.getByProps("transitionToGuild");patcher.before(Router,"transitionToGuild",ctx=>{var[_,channel]=ctx.args;if(isHidden(channel))ctx.result=null;});var MessagesConnected=metro.getByName("MessagesConnected");var snowflake=new SnowflakeUtil;var MessageStyles=metro.Styles.createThemedStyleSheet({"title":{"fontFamily":"ABCGintoNormalVariable_Bold","fontSize":17,"backgroundColor":"#2f3136","textAlign":"left","color":"#ffffff","padding":20,"flex":1},"text":{"fontFamily":"Whitney-Medium","fontSize":14,"backgroundColor":"#2f3136","textAlign":"center","color":"#ffffff","padding":20,"flex":1}});patcher.after(MessagesConnected,"default",(ctx,res)=>{var channel=res.props.channel;if(!isHidden(channel))return;ctx.result=metro.React.createElement(reactNative.Text,{style:MessageStyles.text},metro.React.createElement(reactNative.Text,{style:MessageStyles.title},"Hidden Channel"),metro.React.createElement(reactNative.Text,null,"\n\n"+channel.topic),metro.React.createElement(reactNative.Text,null,"\n\nLast Message: "),metro.React.createElement(reactNative.Text,null,channel.lastMessageId?snowflake.deconstruct(channel.lastMessageId).date.toLocaleString():"-"),metro.React.createElement(reactNative.Text,null,"\n\nLast Pin: "),metro.React.createElement(reactNative.Text,null,channel.lastPinTimestamp?snowflake.deconstruct(channel.lastPinTimestamp).date.toLocaleString():"-"));});})()};return HiddenChannels}(swcHelpers__namespace.wrapNativeSuper(entities.Plugin));return HiddenChannels;})(swcHelpers,globalThis._globals.aliucord.entities,globalThis._globals.aliucord.metro,globalThis._globals.aliucord.utils.patcher,globalThis._globals.aliucord.metro.ReactNative);